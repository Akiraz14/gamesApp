import{b as Y,c as $,d as Z,e as ee,h as te,i as ie,l as ne,n as re,r as oe,s as ae,t as se,v as ce,w as _e}from"./chunk-UIT5EF4V.js";import{Ab as Q,Bb as y,Ca as L,Da as D,Fb as W,Hb as X,Ia as h,Ib as k,Jb as w,Ka as c,La as R,Ma as q,Na as a,O as G,Oa as s,Pa as p,Qa as x,Sa as b,Ta as d,U as C,Va as l,Wa as P,X as g,Xa as v,Ya as J,aa as f,ba as u,bb as S,ca as O,cb as F,d as ue,da as V,eb as B,fb as U,ra as I,v as A,vb as M,w as T,wb as K,xa as H,xb as E,za as o}from"./chunk-OBIQKGAT.js";var N=(()=>{let n=class n{constructor(){this.http=C(W),this.apiUrl=se.pokeApiUrl,this.totalPokemons=1025,this.pokemonList=new Map,this._board=[]}get board(){return this._board}get randomId(){return Math.floor(Math.random()*this.totalPokemons)+1}getPokemon(e){let t=`${this.apiUrl}/pokemon/${e}/`;return this.http.get(t)}getPokemons(e){let t=[];e.forEach(m=>{this.pokemonList.has(m)||t.push(this.getPokemon(m))}),A(t).subscribe(m=>{m.forEach(_=>{this.pokemonList.set(_.id,_)}),this.updateCards()})}updateCards(){this._board.forEach(e=>{let t=this.pokemonList.get(e.id);e.imgUrl=t?.sprites.other?.["official-artwork"].front_default??t?.sprites?.other?.home.front_default??"",e.name=t?.name})}createBoard(e){let t=new Set;for(this._board=[];t.size<e/2;){let _=this.randomId;if(t.has(_))continue;let z={id:_,isFlipped:!1};this._board.push(structuredClone(z)),this._board.push(structuredClone(z)),t.add(_)}let m=_=>_.sort(()=>Math.random()-.5);return m(this._board),m(this._board),this.getPokemons(Array.from(t)),!0}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var he=i=>({invisible:i});function be(i,n){if(i&1){let r=x();a(0,"div")(1,"form",1),b("ngSubmit",function(){f(r);let t=d();return u(t.onSubmit())}),a(2,"div",2)(3,"label",3),l(4),s(),a(5,"button",4),b("click",function(){f(r);let t=d();return u(t.changePairsNumber(-1))}),O(),a(6,"svg",5),p(7,"path",6),s()(),V(),p(8,"input",7),a(9,"button",4),b("click",function(){f(r);let t=d();return u(t.changePairsNumber(1))}),O(),a(10,"svg",8),p(11,"path",9),s()()(),V(),a(12,"div",10)(13,"button",11),b("click",function(){f(r);let t=d();return u(t.onRestart())}),l(14),s(),a(15,"button",12),l(16),s()()()()}if(i&2){let r=n.$implicit,e=d();o(),c("formGroup",e.findSameForm),o(3),v("",r("findSame.pairsNumber"),":"),o(),c("disabled",e.findSameForm.disabled),o(4),c("disabled",e.findSameForm.disabled),o(4),c("ngClass",F(9,he,!e.findSameForm.disabled))("disabled",!e.findSameForm.disabled),o(),v(" ",r("findSame.restart")," "),o(),c("disabled",e.findSameForm.disabled),o(),v(" ",r("findSame.start")," ")}}var le=(()=>{let n=class n{constructor(){this.fb=C(oe),this.findSameService=C(N),this.isCreatedEvent=new D,this.pairsEvent=new D,this.minPairs=12,this.maxPairs=48,this.findSameForm=this.fb.group({pairsNumber:[20,[$.min(this.minPairs),$.max(this.maxPairs)]]})}changePairsNumber(e){let t=this.findSameForm.get("pairsNumber")?.value+e*4;t<this.minPairs||t>this.maxPairs||this.findSameForm.get("pairsNumber")?.setValue(t)}onRestart(){this.findSameForm.enable(),this.isCreatedEvent.emit(!1),this.pairsEvent.emit(0)}onSubmit(){if(this.findSameForm.invalid)return;this.findSameForm.disable();let e=this.findSameForm.get("pairsNumber")?.value;this.findSameService.createBoard(e)&&(this.isCreatedEvent.emit(!0),this.pairsEvent.emit(e))}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["find-same-create"]],outputs:{isCreatedEvent:"isCreated",pairsEvent:"pairs"},standalone:!0,features:[S],decls:1,vars:1,consts:[[4,"transloco","translocoScope"],[3,"formGroup","ngSubmit"],[1,"d-flex","justify-content-center","align-items-center"],[1,"form-label","flex-fill","text-end","me-3"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-caret-left-fill"],["d","m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"],["type","number","formControlName","pairsNumber","aria-label","Cards amount","readonly","",1,"form-control","w-25","text-center","mx-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-caret-right-fill"],["d","m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"],[1,"d-flex","justify-content-between","my-3"],["type","button",1,"btn","btn-danger",3,"ngClass","disabled","click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,m){t&1&&h(0,be,17,11,"div",0),t&2&&c("translocoScope","find-same")},dependencies:[y,M,ae,te,Y,ie,Z,ee,ne,re,w,k]});let i=n;return i})();var pe=ue(_e());function Ce(i,n){if(i&1&&(a(0,"div"),l(1),s()),i&2){let r=d().$implicit;o(),P(r("findSame.completed"))}}function ve(i,n){i&1&&(a(0,"span"),l(1," / "),s())}function ge(i,n){if(i&1&&(a(0,"div"),l(1),B(2,"titlecase"),h(3,ve,2,0,"span",4),l(4),B(5,"titlecase"),s()),i&2){let r=d(2);o(),v(" ",U(2,3,r.firstCard==null?null:r.firstCard.name),""),o(2),c("ngIf",r.secondCard),o(),v("",U(5,5,r.secondCard==null?null:r.secondCard.name)," ")}}function xe(i,n){if(i&1){let r=x();a(0,"div",11)(1,"div",12),b("click",function(){let m=f(r).$implicit,_=d(2);return u(_.flipCard(m))}),a(2,"div",13),p(3,"img",14),s(),a(4,"div",15),p(5,"img",16),s()()()}if(i&2){let r=n.$implicit,e=d(2);o(),q("card shadow-sm "+e.colorStyle),R("flipped",r.isFlipped),o(2),c("src",e.imgUrlHidden,I),o(2),c("src",r.imgUrl,I)("alt",r.name)}}function Se(i,n){if(i&1&&(a(0,"div")(1,"div",1)(2,"div",2)(3,"div",3),h(4,Ce,2,1,"div",4)(5,ge,6,7,"div",4),s(),a(6,"div",5)(7,"p"),l(8),s()(),a(9,"div",6),p(10,"shared-timer",7),s()()(),a(11,"div",8)(12,"div",9),h(13,xe,6,7,"div",10),s()()()),i&2){let r=d();o(4),c("ngIf",!r.active),o(),c("ngIf",r.active),o(3),J("",r.foundPairs()," / ",r.pairsNumber,""),o(2),c("activate",r.active),o(3),c("ngForOf",r.board)}}var fe=(()=>{let n=class n{constructor(){this.translocoService=C(X),this.findSameService=C(N),this.pairsNumber=12,this.active=!0,this.foundPairs=H(0),this.foundAll=L(()=>{this.foundPairs()===this.pairsNumber&&(this.active=!1,pe.default.fire({icon:"success",title:this.translocoService.translate("findSame.messageCorrect.title"),text:this.translocoService.translate("findSame.messageCorrect.text")}))}),this.board=[],this.firstCard=null,this.secondCard=null,this.imgUrlHidden="",this.colorStyle=" color-1 "}ngOnInit(){if(this.pairsNumber===0)throw new Error("Pairs number is required.");this.board=this.findSameService.board;let e=this.randomNum(32);this.imgUrlHidden=`assets/images/find-same/pokeball-${e}.png`;let t=this.randomNum(9);this.colorStyle=` color-${t} `}randomNum(e){return Math.floor(Math.random()*e)+1}flipCard(e){if(!(e.isFlipped||this.secondCard)){if(e.isFlipped=!0,!this.firstCard){this.firstCard=e;return}if(this.secondCard=e,this.firstCard.id===this.secondCard.id){T(1e3).subscribe(()=>{this.firstCard=this.secondCard=null,this.foundPairs.update(t=>t+2)});return}T(2e3).subscribe(()=>{this.firstCard.isFlipped=this.secondCard.isFlipped=!1,this.firstCard=this.secondCard=null})}}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["find-same-board"]],inputs:{pairsNumber:"pairsNumber"},standalone:!0,features:[S],decls:1,vars:1,consts:[[4,"transloco","translocoScope"],[1,"card","text-bg-warning","mb-3","sticky","shadow"],[1,"d-flex","justify-content-around","card-body","mb-0","pb-0"],[1,"col"],[4,"ngIf"],[1,"col","text-center"],[1,"col","text-end"],[3,"activate"],[1,"container","mt-4"],[1,"row","row-cols-4","row-cols-sm-5","row-cols-md-6"],["class","col p-0 pe-2 pb-2",4,"ngFor","ngForOf"],[1,"col","p-0","pe-2","pb-2"],[3,"click"],[1,"front"],["alt","hidden",3,"src"],[1,"back"],[3,"src","alt"]],template:function(t,m){t&1&&h(0,Se,14,6,"div",0),t&2&&c("translocoScope","find-same")},dependencies:[y,K,E,Q,w,k,ce],styles:[".sticky[_ngcontent-%COMP%]{position:sticky;top:80px;z-index:1}.card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.front[_ngcontent-%COMP%]{transition:visibility 1s;animation:_ngcontent-%COMP%_fadein 1s}.back[_ngcontent-%COMP%]{position:absolute;visibility:hidden}.flipped[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{visibility:hidden;filter:brightness(0) invert(1);animation:_ngcontent-%COMP%_fadeout 1s}.flipped[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{visibility:visible}.color-1[_ngcontent-%COMP%]{background-color:#87ceeb}.color-2[_ngcontent-%COMP%]{background-color:orange}.color-3[_ngcontent-%COMP%]{background-color:khaki}.color-4[_ngcontent-%COMP%]{background-color:#ffa07a}.color-5[_ngcontent-%COMP%]{background-color:#90ee90}.color-6[_ngcontent-%COMP%]{background-color:#20b2aa}.color-7[_ngcontent-%COMP%]{background-color:plum}.color-8[_ngcontent-%COMP%]{background-color:#ff1493}.color-9[_ngcontent-%COMP%]{background-color:#7b68ee}@keyframes _ngcontent-%COMP%_colorChanging{0%{background:#00bfff}25%{background:plum}50%{background:khaki}75%{background:#ff1493}to{background:#20b2aa}}@keyframes _ngcontent-%COMP%_fadeout{to{opacity:0}0%{opacity:1}}@keyframes _ngcontent-%COMP%_fadein{to{opacity:1}0%{opacity:0}}"]});let i=n;return i})();function ye(i,n){if(i&1&&p(0,"find-same-board",7),i&2){let r=d(2);c("pairsNumber",r.pairs)}}var ke=i=>({"text-truncate":i});function we(i,n){if(i&1){let r=x();a(0,"div")(1,"h2",1),l(2),s(),p(3,"hr"),a(4,"div",2)(5,"button",3),b("click",function(){f(r);let t=d();return u(t.fullDescription=!t.fullDescription)}),l(6," Description "),s(),a(7,"p",4),l(8),s()(),p(9,"hr"),a(10,"find-same-create",5),b("isCreated",function(t){f(r);let m=d();return u(m.onCreated(t))})("pairs",function(t){f(r);let m=d();return u(m.onPairsAssigned(t))}),s(),p(11,"hr"),h(12,ye,1,1,"find-same-board",6),s()}if(i&2){let r=n.$implicit,e=d();o(2),P(r("games.findSame.title")),o(5),c("ngClass",F(4,ke,!e.fullDescription)),o(),P(r("games.findSame.description")),o(4),c("ngIf",e.isCreated)}}var et=(()=>{let n=class n{constructor(){this.isCreated=!1,this.pairs=0,this.fullDescription=!1}onCreated(e){this.isCreated=e}onPairsAssigned(e){this.pairs=e}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["games-find-same"]],standalone:!0,features:[S],decls:1,vars:1,consts:[[4,"transloco","translocoScope"],[1,"fs-rubik-doodle","text-center"],[1,"mx-3"],["type","button",1,"btn","btn-secondary","btn-sm","mb-3",3,"click"],[3,"ngClass"],[3,"isCreated","pairs"],[3,"pairsNumber",4,"ngIf"],[3,"pairsNumber"]],template:function(t,m){t&1&&h(0,we,13,6,"div",0),t&2&&c("translocoScope","games")},dependencies:[y,M,E,fe,le,w,k],styles:["h2[_ngcontent-%COMP%]{font-size:calc(1.325rem + 3vw)}"]});let i=n;return i})();export{et as FindSameComponent};
